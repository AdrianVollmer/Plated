{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "Import Recipe" %} - Plated{% endblock %}

{% block content %}
<div class="row mb-3">
    <div class="col">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{% url 'recipe_list' %}">{% trans "Recipes" %}</a></li>
                <li class="breadcrumb-item active">{% trans "Import Recipe" %}</li>
            </ol>
        </nav>
    </div>
</div>

<div class="row">
    <div class="col-md-8 offset-md-2">
        <h1 class="display-5 mb-4">{% trans "Import Recipe" %}</h1>

        <div class="card">
            <div class="card-body">
                <h5 class="card-title">{% trans "Upload Recipe File" %}</h5>
                <p class="card-text text-muted mb-4">
                    {% trans "Upload a recipe file to import it into your collection. Select the format from the dropdown below." %}
                </p>

                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="mb-3">
                        <label for="format" class="form-label">{% trans "Format" %}</label>
                        <select class="form-select" id="format" name="format" required>
                            {% for format_id, format_name in formats %}
                            <option value="{{ format_id }}"{% if format_id == 'json' %} selected{% endif %}>{{ format_name }}</option>
                            {% endfor %}
                        </select>
                        <div class="form-text">{% trans "Select the format of your recipe file" %}</div>
                    </div>

                    <div class="mb-3">
                        <label for="recipe_file" class="form-label">{% trans "Select Recipe File" %}</label>
                        <input type="file" class="form-control" id="recipe_file" name="recipe_file" required>
                        <div class="form-text">{% trans "Upload your recipe file in the selected format" %}</div>
                    </div>

                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-primary">{% trans "Import Recipe" %}</button>
                        <a href="{% url 'recipe_list' %}" class="btn btn-secondary">{% trans "Cancel" %}</a>
                    </div>
                </form>
            </div>
        </div>

        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title">{% trans "JSON Schema Example" %}</h5>
                <p class="card-text text-muted">{% trans "Here's an example of the expected JSON format:" %}</p>
                <pre class="code-block p-3 rounded"><code>{
  "title": "Chocolate Chip Cookies",
  "description": "Classic homemade cookies",
  "servings": 24,
  "keywords": "dessert, cookies, chocolate",
  "prep_time_minutes": 15,
  "wait_time_minutes": 12,
  "url": "",
  "notes": "Store in airtight container",
  "special_equipment": "Cookie sheet, mixing bowl",
  "ingredients": [
    {
      "amount": "2",
      "unit": "cups",
      "name": "all-purpose flour",
      "note": "",
      "order": 0
    },
    {
      "amount": "1",
      "unit": "cup",
      "name": "chocolate chips",
      "note": "semi-sweet",
      "order": 1
    }
  ],
  "steps": [
    {
      "content": "Preheat oven to 350°F (175°C).",
      "order": 0
    },
    {
      "content": "Mix dry ingredients in a large bowl.",
      "order": 1
    },
    {
      "content": "Bake for 10-12 minutes until golden brown.",
      "order": 2
    }
  ],
  "images": []
}</code></pre>
            </div>
        </div>
    </div>
</div>
{% endblock %}
